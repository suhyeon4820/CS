## 05. 이동통신과 인터넷프로토콜

### 1. 이동전화와 위성네트워크

>이동전화에 대해 살펴보고 1세대(1G)부터 5세대(5G)까지 이동전화 네트워크의 세대별 진화에 대해 알아본다.
>그리고 GPS, 네비게이션 등의 관련된 위성 네트워크에 대해 학습한다.

#### 1) 이동전화

- 각 이동전화 서비스영역은 **cell**이라 불리는 작은 영역으로 나위어짐

- 각 셀은 기지국(Base Station)으로 제어

- 각 기지국은 MSC(Mobile Switching Center)로 제어

- MSC는 기지국과 전화국 사이에 통신을 조정

  - 전화연결, 요금 관련 처리 등(과금정보 확인)

  **< 휴대전화에서 일반 전화로의 통신 >**

  <img src = "Image\05\01.png">

- Handoff

  - 이동전화가 한 셀에서 다른 셀로 이동
  - 이동시 신호가 한 셀에서는 약해짐, MSC는 통신하기에 적절한 다른 셀을 탐색
    - **무작위 접근(Random access)**
  - **Hard handoff** (과거)
    - 이전 기지국과의 통신을 우선 단절하고 새로운 기지국과의 연결을 시도
  - **Soft handoff** (현재, 양다리)
    - 이전 기지국과의 통신을 단절하기 전에 새로운 기지국과의 연결을 시도
    - 이동 단말이 동시에 두 기지국을 연결

- First Generation

  - **아날로그 신호를 사용한 음성 통신**
  - AMPS(Advanced Mobile Phone System)
    - **FDMA를 사용**하여 각 채널당 주파수를 단말에 할당
    - 순방향(base station to mobile station), 역방향(mobile station to base station) 채널 2개의 아날로그 채널을 사용

  <img src = "Image\05\02.png">

- Second Generation
  - **디지털화된 음성**신호를 위해 설계
  - Global System for Mobile Communication(GSM)은 유럽표준
  - **CDMA(Code Division Multiple Access)는 GPS(Global Positioning System), SMS(Short Message Service)를 사용하게 되었으며, 인터넷 사용이 가능**
  
- Third Generation
  - 3세대는 **디지털 데이터와 음성** 통신을 위해 설계
    - **음성 품질** 기존 전화망에 견줄 만하게 되었음
    - 데이터 전송속도가 **2Mbps **까지 빨라졌음
    - **인터넷접속**이 원활해짐
    - CDMA에서 확장한 Wideband CDMA와 북미 표준인 CDMA2000으로 나뉨
  
- Fourth Generation
  - 4세대는 **ALL IP로 디지털데이터와 음성통신을 통합**
    - 데이터 전송속도가 **100Mbps**까지 빨라졌음
    - **인터넷접속 및 멀티미디어 통신**이 원활해짐
    - WCDMA에서 확장된 LTE와 CDMA2000에서 확장된 Wibro로 나뉨

#### 2) 위성 네트워크

- 인공위성을 이용한 통신 형태
- **2개의 Van Allen 벨트**로 인해 위치가 나누어짐
  
  - Van Allen 벨트 : 하전입자를 갖는 계층을 의미
  
  - Van Allen 벨트에 인공위성이 위치 할 경우 하전입자에 의해 파괴될 수 있음
  
    <img src = "Image\05\03.png">
- 지구를 도는 궤도의 위치에 따라서 GEO, MEO, LEO 3가지로 구분
  - GEO(Geosynchronous Earth Orbit) 
  - MEO(Medium-Earth Orbit)
  - LEO(Low-Earth Orbit)
- GEO Satellites
  - **정지궤도** 위성으로서 지구의 자전속도와 동일하게 움직임
    
    - 북극에서 봤을 때, 각 위성이 120도 차이로 존재
    
    <img src = "Image\05\04.png" >
- MEO Satellites
  - 2개의 Van Allen 벨트 사이에 위치
  - 6-8시간에 한번 씩 지구를 돌며, **GPS(Global Positioning System)로 주로 사용**
    
    - 6개의 궤도로 24개의 위성이 돌고 있음
  - GPS에서는 **4개의 위성으로부터 정보를 받아야 위치 계산이 가능**
    
    - 평면에서는 3개의 점으로부터 거리를 알면 위치 추적이 가능하나, 공간에서는 4개가 필요
    
    <img src = "Image\05\05.png" >
- LEO Satellites
  - 지구와 가장 가까이 인접해 있기 때문에, 전파지연이 적어서 **음성 통신에 주로 사용**
    - 왕복 전파지연시간 20ms 이내
  - Iridium(이리듐) 위성 사용
  - 90~120분에 한번씩 지구를 돌고 있음
  - 6개의 궤도에서 각 궤도 당 11개의 위성
    - 총 66개의 위성



### 2. 인터넷 프로토콜 : IP

#### 1) 네트워크 프로토콜

- **연결지향(Connection-oriented) 프로토콜과 비연결형(Connectionless) 프로토콜**로 구분
  - 연결지향 프로토콜 : 데이터를 전송하기 전에 반드시 연결 설정을 해야함
  - 비연결형 프로토콜 : <u>연결설정과정 없이</u> **데이터 전송만이 존재**
- 대표 프로토콜인 IP는 **비연결형 프로토콜**
- 인터넷 프로토콜인 IP는 **비신뢰성(unreliable), 비연결형(connctionless)** 데이터그램 프로토콜
  - **Best-effort 전달 서비스**를 제공
  - **에러제어**나 **흐름제어**가 없음
  - 헤더에 대한**에러 검출만** 하고 만일 발견되면 **폐기**
- 신뢰성이 중요한 전송에서는 TCP를 함께 사용
- IP에서 패킷을 데이터그램이라고 부름

#### 2) IP 패킷의 형태

<img src = "Image\05\06.png" >

- 버전(Version: VER)
  
  - IP 프로토콜의 버전을 나타내는 것으로 **IPv4와 IPv6로 나뉨**
  
- 헤더의 크기 (Header length : HLEN)
  - 헤더의 크기를 나타내는 것으로 **4바이트 단위**로 나타낸 크기
  - 헤더의 크기는 **20 ~ 60 바이트**로 가변적임
  
- 서비스
  - IP 패킷의 **서비스의 형태**
  - **응용서비스마다 주요하게 다루어야 할 특성**으로 지연시간, 신뢰성, 처리량 등 어떤 특성을 고려해야할지 명시
  
- 전체 길이 : IP 데이터그램을 바이트단위로 나타낸 전체 길이

- 생존시간(Time to live : TTL)
  - IP 데이터그램이 지나가는 **최대 홉(hop)의 수**
  - **각 라우터를 지나갈 때마다 1씩 감소**
  - 값이 **0이 되면 라우토는 해당 데이터그램을 폐기** -> 빠져나가지 못하고 계쏙 떠돌 수 있음
  
- 프로토콜 : IP 계층 위에 존재하는 상위 프로토콜이 무엇인지 명시

  <img src = "Image\05\07.png" >

- 체크섬(Checksum)
  - IP패킷의 **헤더에 대한 오류 검사**를 위해 사용
  
  - 계산 방법
    - 처음에 체크섬의 값을  **0**으로 설정 -> (0은 에러가 없음)
    - 전체 헤더를 **16비트 단위로 구분하여 1의 보수 연산**을 수행
    - **결과 값을 보수**로 만들어서 체크섬 필드에 저장
    
  - 송신자 주소와 목적지 주소 : 송신자와 수신자의 IP 주소를 의미
  
    <img src = "Image\05\08.png" width = "400">

#### 2) 단편화와 옵션

- **프레임의 크기와 형태**는 네트워크에 따라서 다름
  
  - P패킷은 **여러 네트워크를 경유**하기 때문에 다양한 데이터링크 프로토콜을 거쳐감
  
  - IP 패킷은 네트워크가 수용할 수 있는 크기로 분할, 이를 **단편화(fragmentation)**라 함
  
  - IP 패킷이 프레임으로 만들어질 때, **데이터링크 프로토콜에서 수용하느 최대 크기를 Maximum Transfer Unit(MTU)라** 함
  
    <img src = "Image\05\09.png" >
- 플래그(Flags)
  - 3비트로 구성되며 첫 번째 비트는 사용하지 않음
  
  - 두 번째 비트는 **단편화 금지**를 의미
    
    - 값이 1이면 단편화하지 말라는 의미
    
  - 세 번째 비트는 **"단편이 더 있음"**을 의미
    - 값이 1이면 **"단편이 더 있음"**을 의미
    - 값이 0이면 마지막 단편을 의미
    
    <img src = "Image\05\10.png" width = "500">
    
  - 단편화 위치 값(Fragmentation offset)
    - 13 비트로 구성되어 있으며 **단편이 합쳐질 때, 해당 단편의 위치 값**
    - 위치 값은 **첫 번째부터 시작하며 8바이트 단위로 표시**
    
    <img src = "Image\05\11.png" width = "500">
    
  - 옵션 : 옵션은 최대 40바이트까지 가능
  
    <img src = "Image\05\12.png" width = "500">