## 06. IP 주소의 응용

### 1. IP 주소와 서브넷

#### 1) IP 주소

- 네트워크에서는 연결된 시스템을 식별하기 위한 주소가 필요
  - **네트워크 주소를 통해 송신자와 수신자를 구별**할 수 있음
  - IP(Internet Protocol) 주소라고 부름
  
- 인터넷에 **연결된 시스템을 구분**하기 위해 32비트 주소를 사용

- IP 주소를 할당하는 국내 기관은 **한국인터넷진흥원(KISA)**

- IP 주소는 **연결주소** : 시스템의 연결 당 하나씩 할당되는 주소

- IP 주소는 DDN(Dotted-Decimal Notation)으로 표시

  <img src = "\Image\06\01.png" width = "500">

- 클래스 구분 주소(classful addressing) : 클래스는 IP 주소가 **A, B, C, D, E 5개의 클래스**로 구분

  <img src = "\Image\06\02.png" width = "550">

  - 클래스 A(0), B(10), C(110)는 일대일 통신(unicast)으로 사용

  - 클래스 D(1110)는 멀티캐스트(보내는사람 1명, 받는 사람 여러명) 통신으로 사용

  - 클래스 E(1111)는 앞으로 사용을 위한 예비용

    <img src = "\Image\06\03.png" width = "600">

- Netid와 hostid - 네트워크 규모로 구분
  - Netid는 **각 네트워크를 구분**하는 네트워크 식별자
  
  - hostid는 **네트워크 내의 호스트를 구분**하는 호스트 식별자
  
    <img src = "\Image\06\04.png" width = "600">
  
  - IP주소 중에서 특별한 용도로 사용되는 주소는 시스템에 할당하지 않음
    - 브로드캐스트 주소는 netid.255, 255.255.255.255와 같이 hostid 부분이 모두 '1'인 주소
    - Netid.0과 같이 hostid가 '0'인 주소는 해당 네트워크를 의미(특정 시스템에 할당하지 않음)
    - netid가 127인 경우 loopback(테스트)을 의미 (특정 시스템에 할당하지 않음)
    
    <img src = "\Image\06\05.png" width = "600">

#### 2) 서브넷 주소설정(Subnetting)

- IP 주소는 **netid와 hostid로 구분된 주소 구조를 가짐**
  
  - 기관의 외부에서는 netid만 식별하여 라우팅을 수행
  
- **기관 내부는 사실 여러 개의 서브 네트워크로 구성**
  
  - 따라서 서브 네트워크를 구분할 방법이 필요
  
- **nestid의 일부를 사용**하여 네트워크를 서브넷으로 구분하고 각 서브넷에 서브넷 식별자를 할당하는 방법

- 134.75.0.0과 같은 B 클래스 주소를 아래 그림과 같이 모든 시스템에 할당
  
  - **But, 실제 기업의 네트워크가 하나의 LAN으로 구성되지 않음**
  
  - 134.75.1.0은 영업부, 134.75.2.0은 기술부, 134.75.3.0은 기획부 등 hostid 일부를 subnet id로 사용 가능
  
    <img src = "\Image\06\06.png" width = "600">
  
- Hosted 부분을 사용하여 **내부 네트워크의 식별자**로 사용하는 것은 관리의 효율 증가

  <img src = "\Image\06\07.png" width = "500">

#### 3) 마스크(Mask)

- 서브넷팅을 사용하는 경우, hostid의 일부분을 사용
- 때문에 **몇 비트를 subnet 식별자로 사용하고 있는지 확인하는 방법이 필요**
  - 기존의 클래스 구분에서는 첫 번째 바이트로 netid와 hostid가 구분이 가능
  - 이때의 마스크를 **기본 마스크(default mask)**라 함
  - **라우팅은 외부에서는 netid를 기반, 내부에서는 netid와 subnet 식별자를 기반**
- 마스크는 DDN으로 표기
  
  - **사선(slash)이나 CIDR(Classless Interdomain Routing) 표기**를 사용
- 사전이나 CIDR 표기는 netid나 subnet id 위치를 **'1' 비트 수로 표기**
  
  - Hostid는 '0'비트로 표기
  
    <img src = "\Image\06\08.png" width = "500">
- 예시
  - 134.75.0.0과 같은 B 클래스 주소를 다음과 같이 모든 시스템에 할당 가능
  
  - 그러나, **실제 기업의 네트워크가 하나의 LAN으로 구성된 것이 아님**
  
  - 영업부 : 134.75.1.0 / 기술부 : 134.75.2.0 / 기획부 : 134.75.3.0 등 hostid 일부를 subnet id로 사용 가능
  
    <img src = "\Image\06\09.png" width = "400">



### 2. 가변길이 주소

#### 1) 가변길이 주소지정(Classless addressing)

- 클래스를 구분한 IP 주소의 문제점
  
  - 할당 받는 IP 주소는 항상 클래스를 기반으로 **정확한 양의 IP 주소를 받을 수 없음**(인터넷 사용량이 너무 많음)
- **원하는 수만큼 주소만** 배정 가능
  
  - 클래스 구분이 불필요
  - 32비트 전체 주소 공간에 대해 효율적으로 주소 할당이 가능
- 가변길이 주소할당 규칙
  - 할당하는 주소의 수는 **2의 멱승**이어야 함
  
  - 할당하는 주소는 **연속적**임
  
  - **시작 주소는 할당하는 주소의 수로 나누어 떨어짐**
  
    <img src = "\Image\06\10.png" width = "400">
- Mask
  - 마스크는 통상 slash 표기
  - **시작주소와 마스크**가 주어져야 함
    - 주소와 마스크가 주어지면 네트워크 주소를 구할 수 있음
    - 예를 들어, 임의의 주소와 마스크가 240.20.35.36/28로 주어진 경우(네트워크 주소는 240.20.35.32)

#### 2) Subnetting

- 대규모의 주소가 할당된 그룹에서는 서브넷을 만들고, 다른 서브넷 간에 주소를 나눌 수 있음
- 모든 메시지는 그룹을 인터넷 나머지 부분에 연결하는 라우터 주소로 전송
  
  - 라우터는 해당 서브넷에 메시지를 라우팅
  
  <img src = "\Image\06\11.png" width = "400">



- 예를 들어 그룹에 64개의 주소를 포함하는 블록 24.36.15.0/26이 있다고 가정함
  - 그룹은 이를 32, 16, 16개 이렇게 3블록으로 나눌 필요가 있음
  
    <img src = "\Image\06\12.png" width = "400">